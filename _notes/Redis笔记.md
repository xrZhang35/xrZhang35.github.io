# Redisç¬”è®°

# Redisçš„åŸºæœ¬ç‰¹æ€§

ä¸Šçº¿äº†ä¸€ä¸ªWebåº”ç”¨ï¼Œæƒ³åšæ•°æ®ç»Ÿè®¡å·¥ä½œï¼Œæ„å¤§åˆ©ðŸ‡®ðŸ‡¹äººåˆ›å»ºäº†ç»Ÿè®¡æœåŠ¡çš„é¡¹ç›®ï¼Œä¸€å¼€å§‹ç”¨çš„æ˜¯MySQLæ•°æ®åº“ï¼Œä½†æ˜¯å½“æ•°æ®é‡å¤§èµ·æ¥ä¹‹åŽï¼Œé™åˆ¶ç³»ç»Ÿæ€§èƒ½çš„æ˜¯IOï¼ŒäºŽæ˜¯å®ƒè‡ªå·±åœ¨å†…å­˜ä¸­å®žçŽ°äº†è¿™ä¹ˆä¸€ä¸ªåˆ—è¡¨ç»“æž„çš„æ•°æ®åº“å¹¶æ·»åŠ äº†æŒä¹…åŒ–çš„åŠŸèƒ½ã€‚

Redis = remote dictionary service

å¯ä»¥çœ‹å‡ºå…³ç³»åž‹æ•°æ®åº“ä¸é€‚åˆæŸäº›åœºæ™¯ä¸‹çš„å­˜å‚¨åŠŸèƒ½

|       | SQL              | NoSQL                            |
| ----- | ---------------- | -------------------------------- |
| SQL   | è¡Œå­˜å‚¨ï¼ŒäºŒç»´     | éžç»“æž„åŒ–æ•°æ®                     |
| NoSQL | ç»“æž„åŒ–ï¼ŒSchema   | æ•°æ®ä¸Žæ•°æ®ä¹‹é—´æ²¡æœ‰å…³è”           |
|       | è¡¨ä¸Žè¡¨ä¹‹é—´çš„å…³è” | BASEï¼Œæœ€ç»ˆä¸€è‡´æ€§                 |
|       | SQLè¯­æ³•          | æµ·é‡æ•°æ®å­˜å‚¨ã€é«˜å¹¶å‘è¯»å†™         |
|       | äº‹åŠ¡ï¼ŒACID       | æ”¯æŒåˆ†å¸ƒå¼ï¼šæ•°æ®åˆ†ç‰‡ã€æ‰©ç¼©å®¹ç®€å• |
|       |                  |                                  |

å­˜åœ¨çš„é—®é¢˜

-   æ‰©å®¹ï¼Œå †ç¡¬ä»¶ï¼Œæ°´å¹³æ‰©å®¹éœ€è¦åˆ†åº“åˆ†è¡¨ç­‰ç­‰
-   è¡¨ç»“æž„ä¿®æ”¹å›°éš¾
-   åˆ†å¸ƒå¼å¤§æ•°æ®åœºæ™¯ä¸‹è¯»å†™åŽ‹åŠ›å¤§

Nosqlå¸¸è§çš„å½¢å¼

-   KVå­˜å‚¨
-   æ–‡æ¡£å­˜å‚¨ MongoDB
-   åˆ—å­˜å‚¨ HBase
-   å›¾å­˜å‚¨ 
-   å¯¹è±¡å­˜å‚¨
-   XMLå­˜å‚¨

Redisçš„ä¼˜ç‚¹

-   è·¨è¿›ç¨‹ã€åˆ†å¸ƒå¼
-   ä¸°å¯Œçš„æ•°æ®ç±»åž‹
-   åŠŸèƒ½ä¸°å¯Œ
-   ç¼–ç¨‹è¯­è¨€æ”¯æŒå¤š

## Rediså®‰è£…

[é’å±±è€å¸ˆçš„å®‰è£…æ•™ç¨‹](https://gper.club/articles/7e7e7f7ff3g5bgccg69)

[RedisæŒ‡ä»¤å­¦ä¹ ](http://redisdoc.com/)

## Rediså®¢æˆ·ç«¯è¿žæŽ¥

å¹³å¸¸æˆ‘ä»¬æ˜¯æ‹¿ä¸åˆ°ç”Ÿäº§çŽ¯å¢ƒçš„Redis

å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ˜¯éœ€è¦è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„

ä¾‹å­å†™å‡ºæ¥äº†ï¼Œå¯ä»¥çœ‹ideaé¡¹ç›®

## [Redisçš„å®¢æˆ·ç«¯](https://redis.io/docs/clients/)

-   Redission

    >   æä¾›æ›´é«˜çº§çš„åŠŸèƒ½ï¼Œæä¾›åˆ†å¸ƒå¼çš„å®¹å™¨ï¼Œä¾‹å¦‚åˆ†å¸ƒå¼çš„Map

-   Jedis

    >   ç®€ä»‹è½»é‡
    >
    >   å¤šçº¿ç¨‹æƒ…å†µä¸‹å¯èƒ½å‡ºçŽ°å¹²æ‰°çš„æƒ…å†µï¼Œå¯ä»¥å¼•å…¥è¿žæŽ¥æ± æ¥å®žçŽ°
    >
    >   Apache Common Poolæ¥å®žçŽ°çš„è¿žæŽ¥æ± 

-   lettuce

    >   è§£å†³äº†çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜
    >
    >   åˆ©ç”¨nettyæ¥å®žçŽ°ï¼Œå¯ä»¥é€‰æ‹©åŒæ­¥å¼‚æ­¥

æ‰‹å†™Socket --> Jedisè¿žæŽ¥ --> lettuce --> redission

è¿™ä¸‰ä¸ªå®¢æˆ·ç«¯æœ‰ä»€ä¹ˆåŒºåˆ«

## Redisæ•°æ®ç±»åž‹

-   åŸºæœ¬æ•°æ®ç±»åž‹
    -   string
        -   string
        -   int
        -   float
    -   hash
    -   list
    -   set
    -   zset
-   é«˜çº§æ•°æ®ç±»åž‹
    -   bitmmap
    -   hyperloglogs
    -   geospatial
    -   streams

ä½å›¾åœ¨redisä¸­æ˜¯æ€Žä¹ˆå®žçŽ°çš„å‘¢ï¼Ÿ

>   å­—ç¬¦åœ¨Redisé‡Œè¾¹æ˜¯ç”¨8ä½äºŒè¿›åˆ¶åŽ»å­˜å‚¨çš„
>
>   `set k1 a`
>
>   `setbit k1 7 0`å°†ç¬¬8ä½æ”¹ä¸º0
>
>   æ¥å­¦ä¹ ä¸€ä¸‹ä½æ“ä½œçš„å…¶ä»–å€¼
>
>   `getbit k1 0`
>
>   `bitpos k1 0`ç¬¬ä¸€ä¸ª0å‡ºçŽ°çš„ä¸‹æ ‡
>
>   `bitcount k1 0`è®¡ç®—åˆ°åº•æœ‰å¤šå°‘ä¸ª0
>
>   ä½æ“ä½œ`bitop and or xor not`

>   Stringçš„åº”ç”¨åœºæ™¯
>
>   -   ç¼“å­˜
>
>       >   çƒ­ç‚¹æ•°æ®ï¼Œè¯»æ“ä½œä¸ºä¸»çš„æ•°æ®å¯ä»¥æ”¾åˆ°ç¼“å­˜é‡Œè¾¹
>
>   -   åˆ†å¸ƒå¼Session
>
>   -   set NX EX åˆ†å¸ƒå¼é”
>
>   -   incr å…¨å±€ID
>
>       -   åˆ†åº“åˆ†è¡¨ï¼Œä¸­é—´ä»¶æ¥å®žçŽ°ï¼Œè¿™é‡Œå°±æ˜¯redis
>       -   åŒæ—¶å¯ä»¥æ‰¹é‡å®¡æ‰¹
>   -   incr è®¡æ•°å™¨
>
>   -   incr é™æµ
>   -   ä½æ“ä½œ ç»Ÿè®¡
>       -   ä¾‹å¦‚è¦ç»Ÿè®¡æ´»è·ƒåº¦æˆ–è€…æœ€åŽè®¿é—®æ—¶é—´çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨åˆ°æœªæ“ä½œæ¥å®žçŽ°ç»Ÿè®¡

>   åˆ†å¸ƒå¼é”çš„ç®€å•ä»‹ç»
>
>   NXæ˜¯èƒ½å¤Ÿå®žçŽ°ç«žäº‰çš„ï¼Œæ‰€ä»¥å¯ä»¥å®žçŽ°åŠ é”
>
>   NX
>
>   del key-name
>
>   å¦‚æžœæ²¡æœ‰é‡Šæ”¾è¿™æŠŠé”ä¼šé€ æˆæ­»é”ï¼Œæ‰€ä»¥éœ€è¦åŠ ä¸Šè¿‡æœŸæ—¶é—´
>
>   expire EX



### Hash



